# ==========================================
# MASTER SECRETS TEMPLATE (ISEKAI STACK)
# Sentinel OS v11.0 Gold Master
# ------------------------------------------
# Instrucciones: 
# 1. Copia este archivo a ".env"
# 2. Reemplaza los valores marcados como "your_..." o "generate_..."
# 3. NO uses espacios alrededor del signo "="
# ==========================================

# --- [A] CONFIGURACIÓN DE DOMINIO ---
# El dominio base donde desplegarás todo (ej: isekaichat.com)
DOMAIN=isekaichat.com

# --- [B] ACCESO EXTERNO (CLOUDFLARE) ---
# Token de túnel obtenido en Cloudflare Zero Trust Dash
CLOUDFLARE_TUNNEL_TOKEN=your_tunnel_token_here

# --- [C] VINCULACIÓN CHATWOOT (SUPER-LINK) ---
# Estos valores se obtienen una vez instalado Chatwoot
CHATWOOT_GLOBAL_TOKEN=your_chatwoot_access_token
CHATWOOT_GLOBAL_ACCOUNT_ID=1

# --- [D] MULTIMEDIA & S3 (MINIO) ---
S3_ENABLED=true
S3_USE_SSL=true
S3_FORCE_PATH_STYLE=true
# Importante: S3_ENDPOINT debe ser el DOMINIO PÚBLICO para previsualización
S3_ENDPOINT=s3.isekaichat.com
S3_REGION=us-east-1
S3_BUCKET=evolution-media

# --- [E] CHATWOOT ACTIVE STORAGE (AS) ---
# Configuración para que Chatwoot guarde y sirva medios por S3
ACTIVE_STORAGE_SERVICE=s3_compatible
STORAGE_BUCKET_NAME=chatwoot-storage
STORAGE_ENDPOINT=https://s3.isekaichat.com
STORAGE_FORCE_PATH_STYLE=true
# No necesitas STORAGE_ACCESS_KEY si usas las globales de MinIO en docker-compose

# --- [F] ALTA DISPONIBILIDAD (TURBO SYNC) ---
# Sincronización masiva inyectando directo en la DB
CHATWOOT_IMPORT_DATABASE_CONNECTION_URI=postgresql://chatwoot_user:GENERATE_DB_PASSWORD@db_core:5432/chatwoot?schema=public
# Concurrencia de procesamiento (Recomendado: 20 para ráfagas)
SIDEKIQ_CONCURRENCY=20
RAILS_MAX_THREADS=20

# --- [G] SECRETOS DE INFRAESTRUCTURA (Capa 01) ---
POSTGRES_ROOT_PASSWORD=generate_strong_password
REDIS_PASSWORD=generate_strong_password
MINIO_ROOT_PASSWORD=generate_strong_password

# --- [H] CONTRASEÑAS DE BASES DE DATOS ---
CHATWOOT_DB_PASSWORD=generate_strong_password
EVOLUTION_DB_PASSWORD=generate_strong_password
N8N_DB_PASSWORD=generate_strong_password

# --- [I] LLAVES DE SEGURIDAD (APP) ---
# Genera llaves largas y complejas
SECRET_KEY_BASE=generate_a_long_hex_string_128
EVOLUTION_API_KEY=generate_strong_api_key
N8N_ENCRYPTION_KEY=generate_strong_key

# --- [J] HERRAMIENTAS DE GESTIÓN ---
PGADMIN_DEFAULT_EMAIL=admin@isekaichat.com
PGADMIN_DEFAULT_PASSWORD=generate_strong_password
